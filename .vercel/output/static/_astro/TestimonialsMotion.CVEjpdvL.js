import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as l}from"./index.Cd_vQiNd.js";import{M as V,i as _,u as T,P as I,a as O,b as H,L as W,m as w}from"./proxy.DQ5XLoeL.js";function S(t,r){if(typeof t=="function")return t(r);t!=null&&(t.current=r)}function A(...t){return r=>{let i=!1;const a=t.map(c=>{const s=S(c,r);return!i&&typeof s=="function"&&(i=!0),s});if(i)return()=>{for(let c=0;c<a.length;c++){const s=a[c];typeof s=="function"?s():S(t[c],null)}}}}function D(...t){return l.useCallback(A(...t),t)}class K extends l.Component{getSnapshotBeforeUpdate(r){const i=this.props.childRef.current;if(i&&r.isPresent&&!this.props.isPresent){const a=i.offsetParent,c=_(a)&&a.offsetWidth||0,s=this.props.sizeRef.current;s.height=i.offsetHeight||0,s.width=i.offsetWidth||0,s.top=i.offsetTop,s.left=i.offsetLeft,s.right=c-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function U({children:t,isPresent:r,anchorX:i,root:a}){const c=l.useId(),s=l.useRef(null),m=l.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:g}=l.useContext(V),j=D(s,t?.ref);return l.useInsertionEffect(()=>{const{width:u,height:d,top:n,left:o,right:p}=m.current;if(r||!s.current||!u||!d)return;const h=i==="left"?`left: ${o}`:`right: ${p}`;s.current.dataset.motionPopId=c;const x=document.createElement("style");g&&(x.nonce=g);const N=a??document.head;return N.appendChild(x),x.sheet&&x.sheet.insertRule(`
          [data-motion-pop-id="${c}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${d}px !important;
            ${h}px !important;
            top: ${n}px !important;
          }
        `),()=>{N.contains(x)&&N.removeChild(x)}},[r]),e.jsx(K,{isPresent:r,childRef:s,sizeRef:m,children:l.cloneElement(t,{ref:j})})}const B=({children:t,initial:r,isPresent:i,onExitComplete:a,custom:c,presenceAffectsLayout:s,mode:m,anchorX:g,root:j})=>{const u=T(F),d=l.useId();let n=!0,o=l.useMemo(()=>(n=!1,{id:d,initial:r,isPresent:i,custom:c,onExitComplete:p=>{u.set(p,!0);for(const h of u.values())if(!h)return;a&&a()},register:p=>(u.set(p,!1),()=>u.delete(p))}),[i,u,a]);return s&&n&&(o={...o}),l.useMemo(()=>{u.forEach((p,h)=>u.set(h,!1))},[i]),l.useEffect(()=>{!i&&!u.size&&a&&a()},[i]),m==="popLayout"&&(t=e.jsx(U,{isPresent:i,anchorX:g,root:j,children:t})),e.jsx(I.Provider,{value:o,children:t})};function F(){return new Map}const C=t=>t.key||"";function M(t){const r=[];return l.Children.forEach(t,i=>{l.isValidElement(i)&&r.push(i)}),r}const G=({children:t,custom:r,initial:i=!0,onExitComplete:a,presenceAffectsLayout:c=!0,mode:s="sync",propagate:m=!1,anchorX:g="left",root:j})=>{const[u,d]=O(m),n=l.useMemo(()=>M(t),[t]),o=m&&!u?[]:n.map(C),p=l.useRef(!0),h=l.useRef(n),x=T(()=>new Map),[N,$]=l.useState(n),[y,P]=l.useState(n);H(()=>{p.current=!1,h.current=n;for(let b=0;b<y.length;b++){const f=C(y[b]);o.includes(f)?x.delete(f):x.get(f)!==!0&&x.set(f,!1)}},[y,o.length,o.join("-")]);const R=[];if(n!==N){let b=[...n];for(let f=0;f<y.length;f++){const v=y[f],k=C(v);o.includes(k)||(b.splice(f,0,v),R.push(v))}return s==="wait"&&R.length&&(b=R),P(M(b)),$(n),null}const{forceRender:z}=l.useContext(W);return e.jsx(e.Fragment,{children:y.map(b=>{const f=C(b),v=m&&!u?!1:n===y||o.includes(f),k=()=>{if(x.has(f))x.set(f,!0);else return;let E=!0;x.forEach(L=>{L||(E=!1)}),E&&(z?.(),P(h.current),m&&d?.(),a&&a())};return e.jsx(B,{isPresent:v,initial:!p.current||i?void 0:!1,custom:r,presenceAffectsLayout:c,mode:s,root:j,onExitComplete:v?void 0:k,anchorX:g,children:b},f)})})};function Q({testimonios:t}){const[r,i]=l.useState(0),a=l.useRef(null),c=()=>{a.current&&clearTimeout(a.current),a.current=setTimeout(()=>{i(n=>(n+1)%t.length)},3e3)};l.useEffect(()=>(c(),()=>{a.current&&clearTimeout(a.current)}),[r,t.length]);const s=n=>{i((n+t.length)%t.length)},m=()=>s(r+1),g=()=>s(r-1),j={enter:{opacity:0,x:40},center:{opacity:1,x:0},exit:{opacity:0,x:-40}},u={hidden:{opacity:0,y:6},show:{opacity:1,y:0}},d=t[r];return e.jsxs("div",{className:"space-y-6 md:space-y-8",children:[e.jsxs("div",{className:"relative md:hidden",children:[e.jsx("div",{className:"overflow-hidden rounded-2xl border border-brilint-accent/60 bg-brilint-surface/85 shadow-brilint-soft",children:e.jsx(G,{mode:"wait",children:e.jsxs(w.article,{variants:j,initial:"enter",animate:"center",exit:"exit",transition:{duration:.35,ease:"easeOut"},className:"p-6 flex flex-col gap-4",children:[e.jsx("div",{className:"flex items-center gap-2 text-[11px] text-brilint-muted uppercase tracking-[0.14em]",children:d.esVerificado&&e.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full border border-brilint-accent/60 bg-brilint-bg/60 px-3 py-1 text-[11px] font-semibold text-brilint-text",children:[e.jsxs("span",{className:"relative flex h-2 w-2",children:[e.jsx("span",{className:"absolute inline-flex h-full w-full rounded-full bg-emerald-400/35 animate-[ping_1.8s_ease-out_infinite]"}),e.jsx("span",{className:"relative inline-flex h-2 w-2 rounded-full bg-emerald-400"})]}),d.badgeLabel||"Testimonio verificado"]})}),e.jsxs("p",{className:"text-sm text-brilint-muted leading-relaxed",children:["“",d.mensaje,"”"]}),e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("p",{className:"text-sm font-semibold text-brilint-text",children:d.nombre}),e.jsx("p",{className:"text-xs text-brilint-muted",children:d.rol}),e.jsxs("p",{className:"text-[11px] text-brilint-muted/80",children:["Cliente real · Proyecto entregado · ",d.tipoProyecto," · ",d.zona]})]}),d.techStack&&e.jsxs("div",{className:"pt-2 border-t border-brilint-border/60",children:[e.jsx("p",{className:"text-[11px] uppercase tracking-[0.16em] text-brilint-muted mb-2",children:"Stack del proyecto"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:d.techStack.map(n=>e.jsxs(w.span,{variants:u,initial:"hidden",animate:"show",transition:{duration:.25,ease:"easeOut"},className:"inline-flex items-center gap-2 rounded-full border border-brilint-border/70 bg-brilint-bg/70 px-3 py-1 text-[11px] font-semibold text-brilint-text",children:[e.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-brilint-accent/80"}),n]},n))})]})]},d.id)})}),e.jsxs("div",{className:"mt-3 flex items-center justify-between gap-3",children:[e.jsx("button",{onClick:g,"aria-label":"Anterior",className:"p-2 rounded-full bg-brilint-surface/80 border border-brilint-border/70 text-brilint-muted hover:text-brilint-text transition duration-fast active:scale-95 shadow-brilint-soft",children:"<"}),e.jsx("div",{className:"flex-1 flex items-center justify-center gap-2",children:t.map((n,o)=>e.jsx("button",{onClick:()=>s(o),className:`h-2 w-2 rounded-full ${o===r?"bg-brilint-accent":"bg-brilint-border"}`,"aria-label":`Ir al testimonio ${o+1}`},o))}),e.jsx("button",{onClick:m,"aria-label":"Siguiente",className:"p-2 rounded-full bg-brilint-surface/80 border border-brilint-border/70 text-brilint-muted hover:text-brilint-text transition duration-fast active:scale-95 shadow-brilint-soft",children:">"})]})]}),e.jsx("div",{className:"hidden md:grid gap-6 md:grid-cols-3",children:t.map((n,o)=>e.jsxs(w.article,{initial:{opacity:0,y:18},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.25},transition:{duration:.4,ease:"easeOut",delay:o*.08},whileHover:{y:-4},className:"relative h-full rounded-2xl border border-brilint-accent/60 bg-brilint-surface/70 p-6 flex flex-col gap-4 shadow-sm transition duration-200 hover:border-brilint-accent/80 hover:shadow-brilint-soft",children:[e.jsx("div",{className:"flex items-center gap-2",children:n.esVerificado&&e.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full border border-brilint-accent/60 bg-brilint-bg/60 px-3 py-1 text-[11px] font-semibold text-brilint-text uppercase tracking-[0.14em]",children:[e.jsxs("span",{className:"relative flex h-2 w-2",children:[e.jsx("span",{className:"absolute inline-flex h-full w-full rounded-full bg-emerald-400/35 animate-[ping_1.8s_ease-out_infinite]"}),e.jsx("span",{className:"relative inline-flex h-2 w-2 rounded-full bg-emerald-400"})]}),n.badgeLabel||"Testimonio verificado"]})}),e.jsxs("p",{className:"text-sm text-brilint-muted leading-relaxed",children:["“",n.mensaje,"”"]}),e.jsxs("div",{className:"mt-auto space-y-0.5",children:[e.jsx("p",{className:"text-sm font-semibold text-brilint-text",children:n.nombre}),e.jsx("p",{className:"text-xs text-brilint-muted",children:n.rol}),e.jsxs("p",{className:"text-xs text-brilint-muted/80",children:["Cliente real · Proyecto entregado · ",n.tipoProyecto," · ",n.zona]})]}),n.techStack&&e.jsxs(w.div,{initial:{opacity:0,y:8},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.2},transition:{duration:.35,ease:"easeOut",delay:o*.05},className:"pt-3 border-t border-brilint-border/60",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-[11px] uppercase tracking-[0.16em] text-brilint-muted",children:"Stack del proyecto"}),e.jsxs("span",{className:"text-[10px] text-brilint-muted/80",children:[n.techStack.length," piezas clave"]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:n.techStack.map((p,h)=>e.jsxs(w.span,{initial:{opacity:0,y:6},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.2},transition:{duration:.2,ease:"easeOut",delay:h*.03},className:"inline-flex items-center gap-2 rounded-full border border-brilint-border/70 bg-brilint-bg/70 px-3 py-1 text-[11px] font-semibold text-brilint-text",children:[e.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-brilint-accent/80"}),p]},p))})]})]},n.id))})]})}export{Q as default};
